# AWS VPC トラフィック ミラーリングに対する例示的な Wallarm ソリューションのサブモジュール

**情報** これは Terraform モジュールやモジュール実例設定ではありません。このドキュメントは、AWS VPC によるトラフィックミラーリング用の `terraform-aws-wallarm` モジュールを実行するために必要なサブモジュールについての詳細を提供します。

`vpc-mirror-sessions` サブモジュールは、AWS VPC 経由でパケットミラーリングストリームにサブスクライブします。

AWS VPC ミラーリングの設定で一部のオプションのデフォルト値を上書きすることができます：

* ミラーリングされたパケットストリームのターゲットロードバランサの設定を定義する `target_nlb_arn`。
* `direction_egress_enable` と `direction_ingress_enable` （オプション）：`network_interface_ids` で設定したネットワークインターフェースの送信および受信トラフィックミラーリングを有効/無効にします。

    デフォルトでは、受信トラフィックのみが有効化されています。
* `session_id` （オプション）はミラーリングセッションの固有番号を定義します。

    `network_interface_ids` に一つ以上の要素を設定した場合、この変数は最初の生番号を設定します。例えば、3つの ENI と `7` の値がある場合、`7`, `8`, `9` のセッション番号が使用されます。セッション番号は VPC 単位で一意でなければなりません。
* `vxlan_id` （オプション）は VXLAN VNI を定義します。これは、パケットを分析するインスタンス上の別のパケットフィルタリングソリューションによって処理できるミラーリングされたパケットストリームの内部パラメータです。