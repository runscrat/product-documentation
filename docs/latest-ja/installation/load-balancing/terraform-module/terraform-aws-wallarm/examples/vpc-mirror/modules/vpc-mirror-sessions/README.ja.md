# AWS VPCトラフィックミラーリングのためのWallarmソリューションのサブモジュール例

**情報** これはTerraformモジュールやモジュールの例設定ではなく、このドキュメントでは、AWS VPCによってミラーリングされたトラフィック用の `terraform-aws-wallarm` モジュールを実行するために必要なサブモジュールの詳細を提供しています。

`vpc-mirror-sessions` サブモジュールは、AWS VPC経由でパケットミラーリングストリームを購読します。

AWS VPC ミラーリングの設定で一部のオプションのデフォルト値を上書きすることができます：

* `target_nlb_arn` は、ミラードパケットストリームの対象となるロードバランサーの設定を定義します。
* `direction_egress_enable` および `direction_ingress_enable` （オプション）： `network_interface_ids` で設定したネットワークインターフェースの送信と受信トラフィックミラーリングを有効/無効にします。
  
    デフォルトでは、受信トラフィックのみが有効になっています。
* `session_id` （オプション）はミラーリングセッションの一意の番号を定義します。

    `network_interface_ids` に複数の要素を設定した場合、この変数は最初の順番の番号を設定します。例えば、3つのENIと `7` の値の場合、セッション番号として `7`、`8`、`9` が見つかります。セッション番号はVPCごとに一意である必要があります。
* `vxlan_id` （オプション）は VXLAN VNIを定義します。これは、パケットを分析するインスタンス上の別のパケットフィルタリングソリューションによって処理できる、ミラードパケットストリームの内部パラメータです。