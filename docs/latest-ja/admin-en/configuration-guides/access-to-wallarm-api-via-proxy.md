# プロキシ経由でのWallarm APIへのアクセス

これらの指示は、プロキシサーバー経由でWallarm APIにアクセスするための設定手順を説明しています。

* EUクラウド用： `https://api.wallarm.com/`
* USクラウド用： `https://us1.api.wallarm.com/`

アクセスを設定するためには、 `/etc/environment` ファイル内で使用されるプロキシサーバーを定義する環境変数に新しい値を設定してください：

* `https_proxy`： HTTPSプロトコルのためのプロキシを定義します
* `http_proxy`：HTTPプロトコルのためのプロキシを定義します
* `no_proxy`：プロキシを使用しないリソースのリストを定義します

## https_proxy と http_proxy の値

`https_proxy` と `http_proxy` 変数に対する `<scheme>://<proxy_user>:<proxy_pass>@<host>:<port>` 文字列の値を設定します：

* `<scheme>`：使用されるプロトコルを定義します。現在の環境変数がプロキシを設定するプロトコルと一致するべきです
* `<proxy_user>`：プロキシ認証のためのユーザー名を定義します
* `<proxy_pass>`：プロキシ認証のためのパスワードを定義します
* `<host>`：プロキシサーバーのホストを定義します
* `<port>`：プロキシサーバーのポートを定義します

## no_proxy の値

`no_proxy` 変数には、プロキシを使用しないリソースのIPアドレスと/またはドメインの配列を設定します：

* 正しいWallarmノードの動作のために、`127.0.0.1`、`127.0.0.8`、`127.0.0.9`、及び、`localhost`
* `"<res_1>, <res_2>, <res_3>, <res_4>, ..."` 形式で追加のアドレス。ここで、`<res_1>`、`<res_2>`、`<res_3>`、`<res_4>` はIPアドレスと/またはドメインです

## /etc/environment ファイルの例

以下の `/etc/environment` ファイルの例は、次の設定を示しています：

* HTTPSおよびHTTPのリクエストは、プロキシサーバー上で `admin` ユーザー名と `01234` パスワードを使用して認証される、ホスト `1.2.3.4` とポート `1234` へプロキシ化されます。
* `127.0.0.1`、`127.0.0.8`、`127.0.0.9`、および、`localhost` 宛のリクエストに対するプロキシングは無効化されます。

```bash
https_proxy=http://admin:01234@1.2.3.4:1234
http_proxy=http://admin:01234@1.2.3.4:1234
no_proxy="127.0.0.1, 127.0.0.8, 127.0.0.9, localhost"
```