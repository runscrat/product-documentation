[link-ruby]:        http://ruby-doc.org/core-2.6.1/doc/regexp_rdoc.html
[link-yaml]:        https://yaml.org/spec/1.2/spec.html

# ポイント作成の原則

!!! 警告 "予約語"
    予約語との衝突を防ぐため、基本リクエスト要素の名前とキーに以下の名称を使用しないでください。
        
    * パーサーの名称と一致する名前とキー
    * フィルターの名称と一致する名前とキー
    * サービス語の`name`および`value`と一致する名前とキー 

カスタム拡張を開発する際に考慮すべき、いくつかの普遍的なポイント作成の原則があります。

* 全てのポイントは正規表現として扱われます。
    
    **例:**

    * `HEADER_A.*_value`ポイントは、リクエストに`A`から始まる名前のヘッダーが存在する場合、そのヘッダーを参照します。
    * `PATH_\d_value`ポイントは、リクエストのURIパスの最初の10部分を参照します。

* ポイントの部分は`_`シンボルを使って分割する必要があります。
    
    **例:** 
    
    `URI_value`.

* パーサーとフィルターの名前は、ポイントに大文字で追加する必要があります。
    
    **例:** 
    
    `ACTION_EXT_value`.

* リクエスト要素の名前は、基本リクエスト内で表示されるのとまったく同じ方法でポイントに追加する必要があります。
    
    **例:** 
    
    `GET http://example.com/login/?Uid=01234`リクエストの場合、`GET_Uid_value` ポイントは `Uid` クエリ文字列パラメータを指します。
    
    !!! 情報 "特殊符号のエスケープ"
        ポイントで使用する際に一部のサービス記号をエスケープする必要があるかもしれません。詳細情報は、[Rubyプログラミング言語の正規表現][link-ruby]に関するドキュメンテーションを参照してください。

* ポイントは次の方法で拡張に配置することができます：
    * `"`シンボルで囲まれています. 
        
        **例:** 
        
        `"PATH_.*_value"`.
    
    * `'`シンボルで囲まれています. 
        
        **例:** 
        
        `'GET_.*_value'`.
    
    * どのシンボルにも囲まれていません. 
        
        **例:** 
        
        `HEADER_.*_value`.
    
    !!! 情報 "ポイントを記号で囲む"
        YAML構文は、ポイントを囲むためにさまざまな記号を使用する違いを定義します。詳しい情報は、こちらの[リンク][link-yaml]をご覧ください。

* `,`シンボルで分割され、`[`と`]`で囲まれたポイントは、ポイントの配列として扱われます。 
    
    **例:** 
    
    `[GET_uid_value, GET_passwd_value]`.

* サービスワードは、拡張がリクエスト要素の名前または値で動作するかを示すために、ポイントの最後に常に存在する必要があります。 
    * リクエスト要素の名前を扱うためには`name`サービスワードを指定する必要があります。 
        
        `name`サービスワードは次のフィルターと一緒に使用することができます:
        
        * Xml_pi;
        * Xml_dtd_entity.
        
        **例:** 
        
        `POST_XML_XML_DTD_ENTITY_0_name`ポイントは、リクエスト本体のXMLデータに指定された最初のDTDスキーマディレクティブの名前を指します。
    
    * リクエスト要素の値で動作するためには`value`サービスワードを指定する必要があります。 
        
        `value`サービスワードは、利用可能な全てのFAST DSLフィルターとパーサーと一緒に使用することができます。
        
        **例:** 
        
        `PATH_0_value`ポイントは、最初のリクエストURIパス部分の値を参照します。