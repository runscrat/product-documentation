[doc-inactivity-timeout]:           internals.md#test-run

| API呼び出し | `POST /v1/test_run` |      |
| ------------ | ------------------- | ---- |
| 認証： | 必要 | トークンによって認証が提供されます |
| トークンを持つHTTPヘッダー： | `X-WallarmAPI-Token` | このトークンの値をAPIサーバーに渡すために使用されます |
| パラメータ： | `name` **(必須)** | テストランの名称 |
| | `test_record_id` **(必須)** | 既存のテストレコードの識別子 |
| | `desc` | テストランの詳細な説明です。<br>デフォルト値：空文字列 |
| | `file_extensions_to_exclude` | テスト中に評価プロセスから除外する必要がある特定のファイルタイプを指定するためのパラメーターです。これらのファイルタイプは、正規表現で指定されます。<br>たとえば、`ico`ファイル拡張子の除外を設定すると、`GET /favicon.ico`のベースラインリクエストはFASTによってチェックされず、スキップされます。<br>正規表現は次の形式を持っています：<br>- `.`：任意の数（ゼロ以上）の任意の文字<br>- `x*`：任意の数（ゼロ以上）の`x`文字<br>- `x?`：単一の`x`文字（またはなし）<br>- 単一のファイル拡張子（例：`jpg`）<br>- ジャーナルバーで区切られた複数の拡張子（例：`jpg` &#124; `png`）<br>デフォルト値：空文字列（FASTは任意のファイル拡張子を持つベースラインリクエストをチェックします）。 |
| | `policy_id` | テストポリシーの識別子。<br>このパラメータが存在しない場合、デフォルトのポリシーが実行されます |
| | `stop_on_first_fail` | このパラメータは、脆弱性が検出された場合のFASTの動作を指定します：<br>`true`：最初に検出された脆弱性でテストランの実行を停止します。<br>`false`：脆弱性が検出されたかどうかにかかわらず、すべての基準リクエストを処理します。<br>デフォルト値：`false` |
| | `rps_per_baseline` | このパラメータは、目標アプリケーションに送信するテストリクエストの数（*RPS*、*リクエスト/秒*）に制限を設けることを指定します（例：単一のベースラインリクエストから派生した100のテストリクエストが存在する可能性があります）。<br>制限は、テストラン中のベースラインリクエストごとに設定されます（つまり、特定のベースラインリクエストに対しては、1秒あたり`N`個以上のテストリクエストが送信されることはありません）。<br>最小値：`1`。<br>最大値：`500`。<br>デフォルト値：`null`（RPSは無制限） |
| | `rps` | このパラメーターは上記で説明したものと同様ですが、一つのベースラインリクエストだけでなく、テストラン全体についてRPSを全体的に制限します。<br>言い換えると、テストリクエストの全体数が1秒あたりに指定された値を超えないようにするべきです、それはテストラン中に記録されたベースラインリクエストの数に関係なくです。<br>最小値：`1`。<br>最大値：`1000`。<br>デフォルト値：`null`（RPSは無制限） |

**リクエストの例：**

```
curl --request POST \
  --url https://us1.api.wallarm.com/v1/test_run \
  --header 'Content-Type: application/json' \
  --header 'Host: us1.api.wallarm.com' \
  --header 'X-WallarmAPI-Token: token_Qwe12345' \
  --data '{
    "name":"demo-testrun",
    "test_record_id":"rec_0001"
}'
```

**レスポンスの例：テストランのコピーが進行中**

```
{
  "status": 200,
  "body": {
    "id": tr_1234,
    "name": "demo-testrun",
    ...
    "state": "cloning",
    ...
    "test_record_id": "rec_0001",
    ...
}
```

`cloning`の状態は、ベースラインリクエストがオリジナルのテストランからそのコピー（`tr_1234`の識別子を持つテストラン）にクローンされていることを意味します。

**レスポンスの例：テストランのコピーに失敗した**

```
{
  "status": 400,
  "body": {
    "test_record_id": {
      "error": "not_ready_for_cloning",
      "value": "rec_0001"
    }
  }
}
```

`not_ready_for_cloning`エラーは、オリジナルのテストラン（`rec_0001`の識別子を持つテストレコードを含む）で録音プロセスがアクティブであるため、オリジナルのテストランからそのコピーにベースラインリクエストをクローンできないことを意味します。