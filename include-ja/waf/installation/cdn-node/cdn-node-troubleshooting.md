### CDNノードのステータスは何を意味しますか？

次のステータスがWallarm Console → **ノード**にてCDNノードに表示される可能性があります：

* **登録中**：Wallarmはクラウドプロバイダー内でのCDNノードの登録を行います。

    必要な行動：保護されたドメインのDNSレコードにWallarmのCNAMEレコードを追加するために、**CNAMEが必要**のステータスが表示されるのを待ってください。
* **CNAMEが必要**：WallarmのCNAMEレコードが保護したドメインのDNSレコードに追加されていない、またはまだ伝播していません。

    必要な行動： Wallarmから提供されたCNAMEレコードを保護したドメインのDNSレコードに追加するか、または変更がインターネット上で有効になるのを待ってください。
    
    もし変更が24時間以上経っても有効にならない場合は、ドメインプロバイダーがDNSレコードを正常に更新したことを確認してください。それが確認できても、まだ**まだ伝播してない**のステータスがWallarm Consoleに表示されている場合は、[Wallarmの技術サポート](mailto:support@wallarm.com)へご連絡ください。

    次に期待されるステータスは**アクティブ**です。
* **設定中**： Wallarmは変更された起源アドレスやSSL/TLS証明書を処理します。

    必要な行動： **アクティブ**のステータスが表示されるのを待ってください。
* **アクティブ**： WallarmのCDNノードが悪意のあるトラフィックを軽減します。

    必要な行動： なし。こちらでCDNノードが検出した[イベント][events-docs]を監視することができます。
* **削除中**： WallarmはCDNノードを削除します。

    必要な行動： なし、削除が終わるのを待ってください。

### CNAMEレコードの伝播が確認できる方法は何ですか？

Wallarm Consoleの**ノード**セクションは、WallarmのCNAMEレコードがInternet上で効果を発揮したかどうかの実際のステータスを表示します。CNAMEレコードが伝播されている場合、CDNノードのステータスは**アクティブ**です。

さらに、次の要求と一緒にHTTP応答ヘッダーを確認することもできます：

```bash
curl -v <保護されたドメイン>
```

もしWallarmのCNAMEレコードが伝播されていたら、応答には`section-io-*`ヘッダーが含まれます。

もしCNAMEレコードの伝播が24時間以上経ってもない場合は、ドメインプロバイダーがDNSレコードを正常に更新したことを確認してください。それが確認できても、まだ**まだ伝播してない**のステータスがWallarm Consoleに表示されている場合は、[Wallarmの技術サポート](mailto:support@wallarm.com)へご連絡ください。

### CDNノードが**ノード**セクションで赤くハイライトされています。それは何を意味しますか？

**ノード**セクションでCDNノードが赤くハイライトされている場合、以下の原因により登録または設定中にエラーが発生しました：

* サードパーティのクラウドプロバイダーでノードを登録する際に未知のエラーが発生

    必要な行動： [Wallarmの技術サポート](mailto:support@wallarm.com)へご連絡ください。
* 無効なカスタムSSL/TLS証明書

    必要な行動： アップロードした証明書が有効であることを確認してください。もし無効な場合は、有効な証明書をアップロードしてください。

赤くハイライトされたCDNノードはリクエストをプロキシしないため、結果として悪意のあるトラフィックを軽減しません。

### なぜCDNノードがWallarm Consoleのノードリストから消えることがありますか？

Wallarmは、ノードの作成から10日以上CNAMEレコードが変更されないCDNノードを削除します。

CDNノードが消えてしまった場合は、新しいノードを作成してください。

### CDNノードによって保護されたコンテンツの更新に遅延が生じるのはなぜですか？

あなたのサイトがCDNノードで保護されていて、データを変更したときにサイトが大幅に遅れて更新されることに気づいた場合、その原因はおそらく[Varnish Cache][using-varnish-cache]によるもので、これによりコンテンツ配信の速度が向上しますが、CDN上のキャッシュコピーは遅延して更新される可能性があります。

例えば：

1. CDNノードにVarnish Cacheが有効である。
1. サイトで価格を更新した。
1. すべてのリクエストがCDNを経由してプロキシされ、キャッシュはすぐに更新されない。
1. サイトのユーザーはしばらくの間、古い価格を見る。

この問題を解決するためには、Varnish Cacheを無効にすることができます。そのためには、「ノード」→ CDNノードメニュー →「Varnish Cacheの無効化」へと進んでください。
